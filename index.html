<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Australian Retirement Financial Planner</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #34495e;
            --success: #2ecc71;
            --warning: #f39c12;
            --australia-green: #00843D;
            --australia-gold: #FFCD00;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--australia-green), var(--australia-gold));
            color: white;
            padding: 30px 0;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
            background-size: cover;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            position: relative;
        }
        
        .app-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .app-container {
                grid-template-columns: 1fr;
            }
        }
        
        .input-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .results-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        input:focus, select:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }
        
        .btn {
            display: inline-block;
            background: var(--secondary);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            text-align: center;
        }
        
        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .btn-success:hover {
            background: #27ae60;
        }
        
        .btn-warning {
            background: var(--warning);
        }
        
        .btn-warning:hover {
            background: #e67e22;
        }
        
        .btn-australia {
            background: var(--australia-green);
        }
        
        .btn-australia:hover {
            background: #006b32;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .result-card {
            background: var(--light);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }
        
        .result-label {
            font-size: 0.9rem;
            color: var(--dark);
            opacity: 0.8;
        }
        
        .chart-container {
            height: 300px;
            margin: 25px 0;
        }
        
        .recommendations {
            margin-top: 30px;
        }
        
        .recommendation {
            background: var(--light);
            padding: 15px;
            border-left: 4px solid var(--secondary);
            margin-bottom: 15px;
            border-radius: 0 5px 5px 0;
        }
        
        .recommendation.warning {
            border-left-color: var(--warning);
        }
        
        .recommendation.success {
            border-left-color: var(--success);
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            border-bottom-color: var(--secondary);
            color: var(--secondary);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .hidden {
            display: none;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--dark);
            opacity: 0.7;
            font-size: 0.9rem;
        }
        
        .asset-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            border-left: 3px solid var(--secondary);
        }
        
        .asset-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .remove-asset {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 3px;
            padding: 5px 10px;
            cursor: pointer;
        }
        
        .dependents-list {
            margin-top: 15px;
        }
        
        .dependent-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        
        .net-worth-summary {
            background: var(--light);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .net-worth-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #ddd;
        }
        
        .net-worth-total {
            font-weight: bold;
            font-size: 1.2rem;
            border-bottom: none;
            margin-top: 10px;
            padding-top: 15px;
            border-top: 2px solid var(--dark);
        }
        
        .scenario-comparison {
            margin-top: 30px;
        }
        
        .scenario-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }
        
        .scenario-tab {
            padding: 8px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .scenario-tab.active {
            border-bottom-color: var(--australia-green);
            color: var(--australia-green);
            font-weight: 600;
        }
        
        .scenario-content {
            display: none;
        }
        
        .scenario-content.active {
            display: block;
        }
        
        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .scenario-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }
        
        .scenario-age {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--australia-green);
            margin-bottom: 5px;
        }
        
        .scenario-value {
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .australia-flag {
            display: inline-block;
            width: 20px;
            height: 15px;
            background: linear-gradient(to bottom, #00843D 0%, #00843D 50%, #FFCD00 50%, #FFCD00 100%);
            position: relative;
            margin-right: 8px;
            vertical-align: middle;
        }
        
        .australia-flag::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 15"><path d="M2,2 L5,5 L2,8 L5,5 L8,8 L5,5 L8,2 L5,5 L2,2 Z M12,2 L15,5 L12,8 L15,5 L18,8 L15,5 L18,2 L15,5 L12,2 Z" fill="white"/><circle cx="10" cy="7.5" r="2" fill="white"/></svg>');
            background-size: cover;
        }
        
        .super-info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid var(--australia-green);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><span class="australia-flag"></span>Australian Retirement Financial Planner</h1>
            <p class="subtitle">Plan your Australian retirement with Super, Age Pension, and multi-scenario projections</p>
        </header>
        
        <div class="app-container">
            <div class="input-section">
                <h2 class="section-title">Your Financial Information</h2>
                
                <div class="tabs">
                    <div class="tab active" data-tab="basic">Basic Info</div>
                    <div class="tab" data-tab="partner">Partner</div>
                    <div class="tab" data-tab="super">Super & Assets</div>
                    <div class="tab" data-tab="income">Income & Expenses</div>
                </div>
                
                <div class="tab-content active" id="basic-tab">
                    <div class="form-group">
                        <label for="current-age">Your Current Age</label>
                        <input type="number" id="current-age" min="18" max="100" value="45">
                    </div>
                    
                    <div class="form-group">
                        <label for="retirement-age">Your Desired Retirement Age</label>
                        <input type="number" id="retirement-age" min="40" max="100" value="65">
                    </div>
                    
                    <div class="form-group">
                        <label for="life-expectancy">Life Expectancy</label>
                        <select id="life-expectancy">
                            <option value="85">Average (85 years)</option>
                            <option value="90" selected>Above Average (90 years)</option>
                            <option value="95">Longevity (95 years)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="inflation">Expected Annual Inflation (%)</label>
                        <input type="number" id="inflation" min="0" max="10" step="0.1" value="2.5">
                    </div>
                    
                    <div class="form-group">
                        <label for="investment-return">Expected Annual Investment Return (%)</label>
                        <input type="number" id="investment-return" min="0" max="20" step="0.1" value="7">
                    </div>
                </div>
                
                <div class="tab-content" id="partner-tab">
                    <div class="checkbox-group">
                        <input type="checkbox" id="has-partner">
                        <label for="has-partner">I have a partner/spouse</label>
                    </div>
                    
                    <div id="partner-details" class="hidden">
                        <div class="form-group">
                            <label for="partner-age">Partner's Age</label>
                            <input type="number" id="partner-age" min="18" max="100" value="42">
                        </div>
                        
                        <div class="form-group">
                            <label for="partner-retirement-age">Partner's Retirement Age</label>
                            <input type="number" id="partner-retirement-age" min="40" max="100" value="65">
                        </div>
                        
                        <div class="checkbox-group">
                            <input type="checkbox" id="partner-keep-working" checked>
                            <label for="partner-keep-working">Partner continues working after I retire</label>
                        </div>
                        
                        <div class="form-group">
                            <label for="partner-income">Partner's Annual Income</label>
                            <input type="number" id="partner-income" min="0" value="70000">
                        </div>
                        
                        <div class="form-group">
                            <label for="partner-super">Partner's Super Balance</label>
                            <input type="number" id="partner-super" min="0" value="90000">
                        </div>
                        
                        <div class="form-group">
                            <label for="partner-contribution">Partner's Annual Super Contribution</label>
                            <input type="number" id="partner-contribution" min="0" value="8500">
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="super-tab">
                    <div class="super-info">
                        <h4>Australian Superannuation</h4>
                        <p>Your employer contributes 11% of your earnings to super. Additional contributions may be tax-deductible.</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="current-super">Your Current Super Balance</label>
                        <input type="number" id="current-super" min="0" value="250000">
                    </div>
                    
                    <div class="form-group">
                        <label for="annual-contribution">Your Annual Super Contribution (incl. employer)</label>
                        <input type="number" id="annual-contribution" min="0" value="15000">
                    </div>
                    
                    <div class="form-group">
                        <label for="salary-sacrifice">Additional Salary Sacrifice (Annual)</label>
                        <input type="number" id="salary-sacrifice" min="0" value="5000">
                    </div>
                    
                    <h3>Other Assets</h3>
                    
                    <div class="form-group">
                        <label for="investment-properties">Investment Properties Value</label>
                        <input type="number" id="investment-properties" min="0" value="0">
                    </div>
                    
                    <div class="form-group">
                        <label for="primary-residence-value">Primary Residence Value</label>
                        <input type="number" id="primary-residence-value" min="0" value="750000">
                    </div>
                    
                    <div class="form-group">
                        <label for="other-assets">Other Assets Value (Shares, Savings, etc.)</label>
                        <input type="number" id="other-assets" min="0" value="50000">
                    </div>
                </div>
                
                <div class="tab-content" id="income-tab">
                    <div class="form-group">
                        <label for="current-income">Your Current Annual Income</label>
                        <input type="number" id="current-income" min="0" value="95000">
                    </div>
                    
                    <div class="form-group">
                        <label for="age-pension">Expected Age Pension (Annual)</label>
                        <select id="age-pension">
                            <option value="0">No Age Pension</option>
                            <option value="12000" selected>Partial Age Pension</option>
                            <option value="24000">Full Age Pension</option>
                        </select>
                        <small>The maximum full Age Pension for a couple is currently around $40,000 per year.</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="current-expenses">Current Annual Expenses</label>
                        <input type="number" id="current-expenses" min="0" value="65000">
                    </div>
                    
                    <div class="form-group">
                        <label for="retirement-expenses">Expected Retirement Expenses (% of Current)</label>
                        <input type="number" id="retirement-expenses" min="50" max="150" value="75">
                    </div>
                    
                    <div class="form-group">
                        <label for="healthcare-costs">Expected Annual Healthcare Costs in Retirement</label>
                        <input type="number" id="healthcare-costs" min="0" value="7000">
                    </div>
                </div>
                
                <button id="calculate-btn" class="btn btn-block btn-australia">Calculate Retirement Plan</button>
                <button id="save-btn" class="btn btn-success btn-block">Save Data Locally</button>
                <button id="load-btn" class="btn btn-warning btn-block">Load Saved Data</button>
            </div>
            
            <div class="results-section">
                <h2 class="section-title">Your Retirement Plan</h2>
                
                <div id="results-placeholder">
                    <p>Enter your financial information and click "Calculate Retirement Plan" to see your personalized retirement strategy.</p>
                </div>
                
                <div id="results-content" class="hidden">
                    <div class="scenario-comparison">
                        <h3>Retirement Scenarios</h3>
                        <div class="scenario-tabs">
                            <div class="scenario-tab active" data-scenario="55">Age 55</div>
                            <div class="scenario-tab" data-scenario="60">Age 60</div>
                            <div class="scenario-tab" data-scenario="65">Age 65</div>
                            <div class="scenario-tab" data-scenario="70">Age 70</div>
                        </div>
                        
                        <div class="scenario-content active" id="scenario-55">
                            <div class="scenario-grid">
                                <div class="scenario-card">
                                    <div class="scenario-age">Age 55</div>
                                    <div class="result-label">Years to Retirement</div>
                                    <div class="scenario-value" id="scenario-55-years">10</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Projected Super</div>
                                    <div class="scenario-value" id="scenario-55-super">$480,000</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Annual Retirement Income</div>
                                    <div class="scenario-value" id="scenario-55-income">$42,000</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Retirement Shortfall</div>
                                    <div class="scenario-value" id="scenario-55-shortfall">$18,000</div>
                                </div>
                            </div>
                            <div class="recommendation warning">
                                <h4>Age 55 Retirement Considerations</h4>
                                <p>Retiring at 55 would require accessing your super through a transition to retirement pension. You may face a significant income shortfall without additional savings or part-time work.</p>
                            </div>
                        </div>
                        
                        <div class="scenario-content" id="scenario-60">
                            <div class="scenario-grid">
                                <div class="scenario-card">
                                    <div class="scenario-age">Age 60</div>
                                    <div class="result-label">Years to Retirement</div>
                                    <div class="scenario-value" id="scenario-60-years">15</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Projected Super</div>
                                    <div class="scenario-value" id="scenario-60-super">$680,000</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Annual Retirement Income</div>
                                    <div class="scenario-value" id="scenario-60-income">$54,000</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Retirement Shortfall</div>
                                    <div class="scenario-value" id="scenario-60-shortfall">$6,000</div>
                                </div>
                            </div>
                            <div class="recommendation">
                                <h4>Age 60 Retirement Considerations</h4>
                                <p>At age 60, you can access your super tax-free. Your projected income is closer to your needs, but you may still need to supplement with part-time work or reduce expenses.</p>
                            </div>
                        </div>
                        
                        <div class="scenario-content" id="scenario-65">
                            <div class="scenario-grid">
                                <div class="scenario-card">
                                    <div class="scenario-age">Age 65</div>
                                    <div class="result-label">Years to Retirement</div>
                                    <div class="scenario-value" id="scenario-65-years">20</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Projected Super</div>
                                    <div class="scenario-value" id="scenario-65-super">$950,000</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Annual Retirement Income</div>
                                    <div class="scenario-value" id="scenario-65-income">$68,000</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Retirement Surplus</div>
                                    <div class="scenario-value" id="scenario-65-surplus">$8,000</div>
                                </div>
                            </div>
                            <div class="recommendation success">
                                <h4>Age 65 Retirement Considerations</h4>
                                <p>At age 65, you reach Age Pension eligibility and your super has more time to grow. This scenario shows a comfortable retirement with potential for surplus income.</p>
                            </div>
                        </div>
                        
                        <div class="scenario-content" id="scenario-70">
                            <div class="scenario-grid">
                                <div class="scenario-card">
                                    <div class="scenario-age">Age 70</div>
                                    <div class="result-label">Years to Retirement</div>
                                    <div class="scenario-value" id="scenario-70-years">25</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Projected Super</div>
                                    <div class="scenario-value" id="scenario-70-super">$1,250,000</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Annual Retirement Income</div>
                                    <div class="scenario-value" id="scenario-70-income">$82,000</div>
                                </div>
                                <div class="scenario-card">
                                    <div class="result-label">Retirement Surplus</div>
                                    <div class="scenario-value" id="scenario-70-surplus">$22,000</div>
                                </div>
                            </div>
                            <div class="recommendation success">
                                <h4>Age 70 Retirement Considerations</h4>
                                <p>Working until 70 maximizes your super balance and minimizes retirement years. This provides the highest retirement income but means fewer years to enjoy retirement.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="retirement-chart"></canvas>
                    </div>
                    
                    <div class="recommendations">
                        <h3 class="section-title">Recommendations</h3>
                        <div id="recommendations-list">
                            <!-- Recommendations will be populated here -->
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button id="export-pdf" class="btn btn-australia">Export as PDF</button>
                        <button id="print-plan" class="btn">Print Plan</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>This retirement planner is for informational purposes only. Consult with a qualified financial advisor for personalized advice.</p>
            <p>All data is stored locally on your device and is not transmitted to any server.</p>
            <p>Australian Superannuation and Age Pension rules are subject to change. Verify current regulations with the ATO and Services Australia.</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // DOM Elements
        const calculateBtn = document.getElementById('calculate-btn');
        const saveBtn = document.getElementById('save-btn');
        const loadBtn = document.getElementById('load-btn');
        const exportPdfBtn = document.getElementById('export-pdf');
        const printPlanBtn = document.getElementById('print-plan');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const resultsPlaceholder = document.getElementById('results-placeholder');
        const resultsContent = document.getElementById('results-content');
        const hasPartnerCheckbox = document.getElementById('has-partner');
        const partnerDetails = document.getElementById('partner-details');
        const partnerKeepWorking = document.getElementById('partner-keep-working');
        const scenarioTabs = document.querySelectorAll('.scenario-tab');
        const scenarioContents = document.querySelectorAll('.scenario-content');
        
        // Input fields
        const currentAge = document.getElementById('current-age');
        const retirementAge = document.getElementById('retirement-age');
        const lifeExpectancy = document.getElementById('life-expectancy');
        const inflation = document.getElementById('inflation');
        const investmentReturn = document.getElementById('investment-return');
        const currentSuper = document.getElementById('current-super');
        const annualContribution = document.getElementById('annual-contribution');
        const salarySacrifice = document.getElementById('salary-sacrifice');
        const currentIncome = document.getElementById('current-income');
        const agePension = document.getElementById('age-pension');
        const currentExpenses = document.getElementById('current-expenses');
        const retirementExpenses = document.getElementById('retirement-expenses');
        const healthcareCosts = document.getElementById('healthcare-costs');
        
        // Partner fields
        const partnerAge = document.getElementById('partner-age');
        const partnerRetirementAge = document.getElementById('partner-retirement-age');
        const partnerIncome = document.getElementById('partner-income');
        const partnerSuper = document.getElementById('partner-super');
        const partnerContribution = document.getElementById('partner-contribution');
        
        // Asset fields
        const investmentProperties = document.getElementById('investment-properties');
        const primaryResidenceValue = document.getElementById('primary-residence-value');
        const otherAssets = document.getElementById('other-assets');
        
        // Scenario result fields
        const scenario55Years = document.getElementById('scenario-55-years');
        const scenario55Super = document.getElementById('scenario-55-super');
        const scenario55Income = document.getElementById('scenario-55-income');
        const scenario55Shortfall = document.getElementById('scenario-55-shortfall');
        
        const scenario60Years = document.getElementById('scenario-60-years');
        const scenario60Super = document.getElementById('scenario-60-super');
        const scenario60Income = document.getElementById('scenario-60-income');
        const scenario60Shortfall = document.getElementById('scenario-60-shortfall');
        
        const scenario65Years = document.getElementById('scenario-65-years');
        const scenario65Super = document.getElementById('scenario-65-super');
        const scenario65Income = document.getElementById('scenario-65-income');
        const scenario65Surplus = document.getElementById('scenario-65-surplus');
        
        const scenario70Years = document.getElementById('scenario-70-years');
        const scenario70Super = document.getElementById('scenario-70-super');
        const scenario70Income = document.getElementById('scenario-70-income');
        const scenario70Surplus = document.getElementById('scenario-70-surplus');
        
        const recommendationsList = document.getElementById('recommendations-list');
        
        // Chart variable
        let retirementChart;
        
        // Tab functionality
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show active tab content
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === `${tabId}-tab`) {
                        content.classList.add('active');
                    }
                });
            });
        });
        
        // Scenario tab functionality
        scenarioTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const scenarioId = tab.getAttribute('data-scenario');
                
                // Update active scenario tab
                scenarioTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show active scenario content
                scenarioContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === `scenario-${scenarioId}`) {
                        content.classList.add('active');
                    }
                });
            });
        });
        
        // Partner checkbox toggle
        hasPartnerCheckbox.addEventListener('change', function() {
            if (this.checked) {
                partnerDetails.classList.remove('hidden');
            } else {
                partnerDetails.classList.add('hidden');
            }
        });
        
        // Calculate retirement plan
        calculateBtn.addEventListener('click', calculateRetirement);
        
        function calculateRetirement() {
            // Get input values
            const age = parseInt(currentAge.value);
            const retireAge = parseInt(retirementAge.value);
            const expectancy = parseInt(lifeExpectancy.value);
            const inflationRate = parseFloat(inflation.value) / 100;
            const returnRate = parseFloat(investmentReturn.value) / 100;
            const superBalance = parseFloat(currentSuper.value);
            const contribution = parseFloat(annualContribution.value) + parseFloat(salarySacrifice.value);
            const income = parseFloat(currentIncome.value);
            const pensionAmt = parseFloat(agePension.value);
            const expenses = parseFloat(currentExpenses.value);
            const retirementExpenseRate = parseFloat(retirementExpenses.value) / 100;
            const healthcare = parseFloat(healthcareCosts.value);
            
            // Partner data
            let partnerData = null;
            if (hasPartnerCheckbox.checked) {
                partnerData = {
                    age: parseInt(partnerAge.value),
                    retirementAge: parseInt(partnerRetirementAge.value),
                    keepWorking: partnerKeepWorking.checked,
                    income: parseFloat(partnerIncome.value),
                    super: parseFloat(partnerSuper.value),
                    contribution: parseFloat(partnerContribution.value)
                };
            }
            
            // Asset data
            const investmentPropsValue = parseFloat(investmentProperties.value);
            const residenceValue = parseFloat(primaryResidenceValue.value);
            const otherAssetsValue = parseFloat(otherAssets.value);
            
            // Calculate retirement scenarios
            calculateScenario(55, age, expectancy, inflationRate, returnRate, superBalance, contribution, 
                            expenses, retirementExpenseRate, healthcare, pensionAmt, partnerData);
            calculateScenario(60, age, expectancy, inflationRate, returnRate, superBalance, contribution, 
                            expenses, retirementExpenseRate, healthcare, pensionAmt, partnerData);
            calculateScenario(65, age, expectancy, inflationRate, returnRate, superBalance, contribution, 
                            expenses, retirementExpenseRate, healthcare, pensionAmt, partnerData);
            calculateScenario(70, age, expectancy, inflationRate, returnRate, superBalance, contribution, 
                            expenses, retirementExpenseRate, healthcare, pensionAmt, partnerData);
            
            // Generate recommendations
            generateRecommendations(age, retireAge, superBalance, contribution, partnerData);
            
            // Generate chart
            generateChart(age, expectancy, returnRate, superBalance, contribution, partnerData);
            
            // Show results
            resultsPlaceholder.classList.add('hidden');
            resultsContent.classList.remove('hidden');
        }
        
        function calculateScenario(scenarioAge, currentAge, lifeExpectancy, inflationRate, returnRate, 
                                 superBalance, contribution, expenses, retirementExpenseRate, healthcare, 
                                 pensionAmt, partnerData) {
            const yearsToRetirement = scenarioAge - currentAge;
            const retirementYears = lifeExpectancy - scenarioAge;
            
            // Calculate future super balance
            let projectedSuper = superBalance;
            for (let i = 0; i < yearsToRetirement; i++) {
                projectedSuper = projectedSuper * (1 + returnRate) + contribution;
            }
            
            // Add partner's super if applicable and if partner retires at same time or earlier
            if (partnerData && partnerData.retirementAge <= scenarioAge) {
                let partnerProjectedSuper = partnerData.super;
                const partnerYearsToRetirement = scenarioAge - partnerData.age;
                
                for (let i = 0; i < partnerYearsToRetirement; i++) {
                    partnerProjectedSuper = partnerProjectedSuper * (1 + returnRate) + partnerData.contribution;
                }
                
                projectedSuper += partnerProjectedSuper;
            }
            
            // Calculate retirement expenses (adjusted for inflation)
            const retirementExpensesAnnual = (expenses * retirementExpenseRate) + healthcare;
            const futureRetirementExpenses = retirementExpensesAnnual * Math.pow(1 + inflationRate, yearsToRetirement);
            
            // Calculate retirement income (4% withdrawal rule + Age Pension)
            const withdrawalRate = 0.04;
            const superIncome = projectedSuper * withdrawalRate;
            const totalRetirementIncome = superIncome + pensionAmt;
            
            // Calculate shortfall/surplus
            const shortfall = Math.max(0, futureRetirementExpenses - totalRetirementIncome);
            const surplus = Math.max(0, totalRetirementIncome - futureRetirementExpenses);
            
            // Update scenario display
            const yearsElement = document.getElementById(`scenario-${scenarioAge}-years`);
            const superElement = document.getElementById(`scenario-${scenarioAge}-super`);
            const incomeElement = document.getElementById(`scenario-${scenarioAge}-income`);
            
            if (yearsElement) yearsElement.textContent = yearsToRetirement;
            if (superElement) superElement.textContent = formatCurrency(projectedSuper);
            if (incomeElement) incomeElement.textContent = formatCurrency(totalRetirementIncome);
            
            if (shortfall > 0) {
                const shortfallElement = document.getElementById(`scenario-${scenarioAge}-shortfall`);
                if (shortfallElement) shortfallElement.textContent = formatCurrency(shortfall);
                
                // Hide surplus element if it exists
                const surplusElement = document.getElementById(`scenario-${scenarioAge}-surplus`);
                if (surplusElement) surplusElement.style.display = 'none';
            } else {
                const surplusElement = document.getElementById(`scenario-${scenarioAge}-surplus`);
                if (surplusElement) {
                    surplusElement.textContent = formatCurrency(surplus);
                    surplusElement.style.display = 'block';
                }
                
                // Hide shortfall element if it exists
                const shortfallElement = document.getElementById(`scenario-${scenarioAge}-shortfall`);
                if (shortfallElement) shortfallElement.style.display = 'none';
            }
            
            return {
                age: scenarioAge,
                yearsToRetirement,
                projectedSuper,
                retirementIncome: totalRetirementIncome,
                shortfall,
                surplus
            };
        }
        
        function generateRecommendations(currentAge, retirementAge, superBalance, contribution, partnerData) {
            recommendationsList.innerHTML = '';
            
            // Super balance recommendations
            const averageSuper = {
                45: 150000,
                50: 215000,
                55: 330000,
                60: 430000,
                65: 510000
            };
            
            let ageBracket = Math.floor(currentAge / 5) * 5;
            if (ageBracket < 45) ageBracket = 45;
            if (ageBracket > 65) ageBracket = 65;
            
            const avgSuperForAge = averageSuper[ageBracket];
            
            if (superBalance < avgSuperForAge * 0.7) {
                recommendationsList.innerHTML += `
                    <div class="recommendation warning">
                        <h4>Super Balance Below Average</h4>
                        <p>Your super balance is below the average for your age group. Consider:</p>
                        <ul>
                            <li>Making additional salary sacrifice contributions</li>
                            <li>Reviewing your investment strategy within super</li>
                            <li>Consolidating multiple super accounts to reduce fees</li>
                            <li>Seeking financial advice to optimize your super strategy</li>
                        </ul>
                    </div>
                `;
            } else if (superBalance > avgSuperForAge * 1.3) {
                recommendationsList.innerHTML += `
                    <div class="recommendation success">
                        <h4>Strong Super Position</h4>
                        <p>Your super balance is above average for your age. Consider:</p>
                        <ul>
                            <li>Diversifying investments as you approach retirement</li>
                            <li>Exploring transition to retirement strategies as you near preservation age</li>
                            <li>Planning for potential Age Pension impacts due to your assets</li>
                        </ul>
                    </div>
                `;
            }
            
            // Partner-specific recommendations
            if (partnerData) {
                if (partnerData.keepWorking) {
                    recommendationsList.innerHTML += `
                        <div class="recommendation">
                            <h4>Partner Continuing Work</h4>
                            <p>With your partner continuing to work after you retire:</p>
                            <ul>
                                <li>Your household income will be partially maintained during the transition</li>
                                <li>Your partner's super will continue growing with contributions</li>
                                <li>Consider adjusting your retirement budget during this transition period</li>
                            </ul>
                        </div>
                    `;
                }
                
                // Age difference considerations
                const ageDifference = partnerData.age - currentAge;
                if (Math.abs(ageDifference) >= 5) {
                    recommendationsList.innerHTML += `
                        <div class="recommendation">
                            <h4>Age Difference Planning</h4>
                            <p>With a significant age difference between you and your partner:</p>
                            <ul>
                                <li>Consider the impact on Age Pension eligibility timing</li>
                                <li>Plan for potential healthcare needs at different life stages</li>
                                <li>Review your estate planning and super beneficiary nominations</li>
                            </ul>
                        </div>
                    `;
                }
            }
            
            // General Australian retirement recommendations
            recommendationsList.innerHTML += `
                <div class="recommendation">
                    <h4>Australian Retirement Strategy</h4>
                    <p>Key considerations for Australian retirement planning:</p>
                    <ul>
                        <li>Super preservation age is between 55-60 depending on your birth date</li>
                        <li>Age Pension eligibility begins at 67 (increasing to 67.5 by 2023)</li>
                        <li>Consider the impact of asset and income tests on Age Pension eligibility</li>
                        <li>Explore the First Home Super Saver Scheme if considering downsizing</li>
                        <li>Review your super investment strategy as you approach retirement</li>
                    </ul>
                </div>
            `;
        }
        
        function generateChart(currentAge, lifeExpectancy, returnRate, superBalance, contribution, partnerData) {
            const ctx = document.getElementById('retirement-chart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (retirementChart) {
                retirementChart.destroy();
            }
            
            // Prepare data for different retirement ages
            const labels = ['Age 55', 'Age 60', 'Age 65', 'Age 70'];
            const superData = [];
            const incomeData = [];
            const expenseData = [];
            
            // Calculate values for each retirement age
            for (let i = 0; i < labels.length; i++) {
                const scenarioAge = 55 + i * 5;
                const yearsToRetirement = scenarioAge - currentAge;
                
                // Calculate super at retirement
                let projectedSuper = superBalance;
                for (let j = 0; j < yearsToRetirement; j++) {
                    projectedSuper = projectedSuper * (1 + returnRate) + contribution;
                }
                
                // Add partner's super if applicable
                if (partnerData && partnerData.retirementAge <= scenarioAge) {
                    let partnerProjectedSuper = partnerData.super;
                    const partnerYearsToRetirement = scenarioAge - partnerData.age;
                    
                    for (let j = 0; j < partnerYearsToRetirement; j++) {
                        partnerProjectedSuper = partnerProjectedSuper * (1 + returnRate) + partnerData.contribution;
                    }
                    
                    projectedSuper += partnerProjectedSuper;
                }
                
                superData.push(projectedSuper);
                
                // Calculate retirement income (4% rule)
                const retirementIncome = projectedSuper * 0.04;
                incomeData.push(retirementIncome);
                
                // Use placeholder for expenses (would need actual expense calculation)
                expenseData.push(retirementIncome * 0.85); // Assuming expenses are 85% of income for visualization
            }
            
            // Create chart
            retirementChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Projected Super Balance',
                            data: superData,
                            backgroundColor: 'rgba(52, 152, 219, 0.7)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Annual Retirement Income',
                            data: incomeData,
                            backgroundColor: 'rgba(46, 204, 113, 0.7)',
                            borderColor: 'rgba(46, 204, 113, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Retirement Projections by Age'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${formatCurrency(context.raw)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Utility function to format currency
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-AU', {
                style: 'currency',
                currency: 'AUD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }
        
        // Save data to local storage
        saveBtn.addEventListener('click', saveData);
        
        function saveData() {
            const data = {
                currentAge: currentAge.value,
                retirementAge: retirementAge.value,
                lifeExpectancy: lifeExpectancy.value,
                inflation: inflation.value,
                investmentReturn: investmentReturn.value,
                currentSuper: currentSuper.value,
                annualContribution: annualContribution.value,
                salarySacrifice: salarySacrifice.value,
                currentIncome: currentIncome.value,
                agePension: agePension.value,
                currentExpenses: currentExpenses.value,
                retirementExpenses: retirementExpenses.value,
                healthcareCosts: healthcareCosts.value,
                hasPartner: hasPartnerCheckbox.checked,
                partnerAge: partnerAge.value,
                partnerRetirementAge: partnerRetirementAge.value,
                partnerKeepWorking: partnerKeepWorking.checked,
                partnerIncome: partnerIncome.value,
                partnerSuper: partnerSuper.value,
                partnerContribution: partnerContribution.value,
                investmentProperties: investmentProperties.value,
                primaryResidenceValue: primaryResidenceValue.value,
                otherAssets: otherAssets.value
            };
            
            localStorage.setItem('australianRetirementPlannerData', JSON.stringify(data));
            alert('Your retirement data has been saved locally!');
        }
        
        // Load data from local storage
        loadBtn.addEventListener('click', loadData);
        
        function loadData() {
            const savedData = localStorage.getItem('australianRetirementPlannerData');
            
            if (savedData) {
                const data = JSON.parse(savedData);
                
                // Load basic data
                currentAge.value = data.currentAge;
                retirementAge.value = data.retirementAge;
                lifeExpectancy.value = data.lifeExpectancy;
                inflation.value = data.inflation;
                investmentReturn.value = data.investmentReturn;
                currentSuper.value = data.currentSuper;
                annualContribution.value = data.annualContribution;
                salarySacrifice.value = data.salarySacrifice || 0;
                currentIncome.value = data.currentIncome;
                agePension.value = data.agePension;
                currentExpenses.value = data.currentExpenses;
                retirementExpenses.value = data.retirementExpenses;
                healthcareCosts.value = data.healthcareCosts;
                
                // Load partner data
                hasPartnerCheckbox.checked = data.hasPartner;
                if (data.hasPartner) {
                    partnerDetails.classList.remove('hidden');
                    partnerAge.value = data.partnerAge;
                    partnerRetirementAge.value = data.partnerRetirementAge;
                    partnerKeepWorking.checked = data.partnerKeepWorking;
                    partnerIncome.value = data.partnerIncome;
                    partnerSuper.value = data.partnerSuper;
                    partnerContribution.value = data.partnerContribution;
                }
                
                // Load asset data
                investmentProperties.value = data.investmentProperties || 0;
                primaryResidenceValue.value = data.primaryResidenceValue || 0;
                otherAssets.value = data.otherAssets || 0;
                
                alert('Your saved retirement data has been loaded!');
                
                // Recalculate with loaded data
                calculateRetirement();
            } else {
                alert('No saved data found. Please save your data first.');
            }
        }
        
        // Export as PDF (simplified version)
        exportPdfBtn.addEventListener('click', () => {
            alert('In a full implementation, this would generate a PDF report. For now, use the print function.');
        });
        
        // Print plan
        printPlanBtn.addEventListener('click', () => {
            window.print();
        });
        
        // Initialize with sample calculation
        window.addEventListener('DOMContentLoaded', () => {
            calculateRetirement();
        });
    </script>
</body>
</html>
